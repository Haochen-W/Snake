{"ast":null,"code":"var _jsxFileName = \"/Users/JasonWu/snake/src/Board.js\";\nimport React from 'react';\nimport Snake from './snake';\nimport Panel from './Panel';\nimport './Panel.css';\nimport KeyboardEventHandler from 'react-keyboard-event-handler'; //import { isAbsolute } from 'path';\n\nconst boardSize = 720;\nconst cellSize = boardSize / 30;\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      snake: {\n        head: {\n          x: 15,\n          y: 15\n        },\n        tail: {\n          x: 15,\n          y: 15\n        },\n        direction: '',\n        body: [{\n          x: 15,\n          y: 15\n        }],\n        running: false,\n        alive: true,\n        speed: 2,\n        food: {},\n        livefood: {},\n        livefoodeaten: true,\n        currentscore: 0,\n        record: 0,\n        lives: 1\n      }\n    };\n  }\n\n  drawGrid() {\n    const ctx = this.state.ctx;\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';\n    ctx.fillStyle = '#9575cd';\n    ctx.fillRect(0, 0, boardSize, boardSize); // fillrect is a function, so has ()\n\n    for (var vertical = cellSize; vertical < boardSize; vertical += cellSize) {\n      ctx.beginPath();\n      ctx.moveTo(vertical, 0);\n      ctx.lineTo(vertical, boardSize);\n      ctx.stroke();\n    }\n\n    for (var horizontal = cellSize; horizontal < boardSize; horizontal += cellSize) {\n      ctx.beginPath();\n      ctx.moveTo(0, horizontal);\n      ctx.lineTo(boardSize, horizontal);\n      ctx.stroke();\n    }\n  }\n\n  drawGrid2() {\n    const ctx = this.state.ctx;\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.01)'; // strokeStyle is a field, no ()\n\n    ctx.fillStyle = '#9575cd'; //ctx.fillRect(0, 0, boardSize, boardSize) // fillrect is a function, so has ()\n\n    for (var vertical = cellSize; vertical < boardSize; vertical += cellSize) {\n      ctx.beginPath();\n      ctx.moveTo(vertical, 0);\n      ctx.lineTo(vertical, boardSize);\n      ctx.stroke();\n    }\n\n    for (var horizontal = cellSize; horizontal < boardSize; horizontal += cellSize) {\n      ctx.beginPath();\n      ctx.moveTo(0, horizontal);\n      ctx.lineTo(boardSize, horizontal);\n      ctx.stroke();\n    }\n  }\n\n  drawSnake() {\n    const _this$state = this.state,\n          ctx = _this$state.ctx,\n          snake = _this$state.snake;\n    ctx.fillStyle = '#795548';\n    snake.body.forEach(cord => {\n      // for loop through the snake's body, fill rect\n      ctx.fillRect(cord.x * cellSize, cord.y * cellSize, 1 * cellSize, 1 * cellSize);\n    });\n  }\n\n  drawBoard() {\n    const canvas = this.refs.gameBoard;\n    this.setState({\n      canvas: canvas,\n      ctx: canvas.getContext('2d')\n    }, function () {\n      this.drawGrid();\n      this.drawSnake();\n      this.drawFood();\n    });\n  }\n\n  changeDirection(direction) {\n    let newState = Object.assign({}, this.state);\n\n    if (direction === 'up' || direction === 'w') {\n      newState.snake.direction = 'up';\n    } else if (direction === 'down' || direction === 's') {\n      newState.snake.direction = 'down';\n    } else if (direction === 'left' || direction === 'a') {\n      newState.snake.direction = 'left';\n    } else if (direction === 'right' || direction === 'd') {\n      newState.snake.direction = 'right';\n    }\n\n    this.setState(newState);\n    this.canvasMoveSnake();\n  }\n\n  canvasMoveSnake() {\n    const _this$state2 = this.state,\n          ctx = _this$state2.ctx,\n          snake = _this$state2.snake;\n    ctx.fillStyle = '#9575cd';\n    this.drawRect(snake.tail.x, snake.tail.y, 1, 1);\n    ctx.fillStyle = 'yellow';\n    this.drawRect(snake.head.x, snake.head.y, 1, 1);\n\n    if (snake.head.x === snake.food.x && snake.head.y === snake.food.y) {\n      this.addBody();\n      this.addscore();\n      this.drawFood();\n    }\n\n    if (snake.head.x === snake.livefood.x && snake.head.y === snake.livefood.y) {\n      this.addBody();\n      this.addlive();\n      snake.livefoodeaten = true;\n    }\n\n    if (snake.alive === false && snake.running === false) {\n      this.endGame();\n    }\n\n    this.drawGrid2();\n  }\n\n  drawRect(x, y, l, h) {\n    const ctx = this.state.ctx;\n    ctx.fillRect(x * cellSize, y * cellSize, l * cellSize, h * cellSize);\n  }\n\n  componentDidMount() {\n    this.drawBoard();\n  } //as soon as the object is created, draw the board\n\n\n  addscore() {\n    let newState = Object.assign({}, this.state);\n    newState.snake.currentscore = newState.snake.currentscore + 1;\n    newState.display = newState.snake.currentscore;\n    this.setState(newState);\n  }\n\n  addlive() {\n    let newState = Object.assign({}, this.state);\n    newState.snake.lives = newState.snake.lives + 1;\n    this.setState(newState);\n  }\n\n  drawFood() {\n    const _this$state3 = this.state,\n          ctx = _this$state3.ctx,\n          snake = _this$state3.snake;\n    var position = {\n      x: Math.floor(Math.random() * 30),\n      y: Math.floor(Math.random() * 30)\n    };\n\n    while (this.exists(position)) {\n      position.x = Math.floor(Math.random() * 30);\n      position.y = Math.floor(Math.random() * 30);\n    }\n\n    snake.food = position;\n\n    if (snake.livefoodeaten === true && position.x % 7 === 0 && position.y % 7 === 0) {\n      ctx.fillStyle = 'pink';\n      this.drawliveFood();\n    }\n\n    this.setState({\n      snake: snake\n    });\n    ctx.fillStyle = 'red';\n    this.drawRect(position.x, position.y, 1, 1);\n  }\n\n  drawliveFood() {\n    const _this$state4 = this.state,\n          ctx = _this$state4.ctx,\n          snake = _this$state4.snake;\n    ctx.fillStyle = 'pink';\n    var position = {\n      x: Math.floor(Math.random() * 30),\n      y: Math.floor(Math.random() * 30)\n    };\n\n    while (this.exists(position) && position.x !== snake.food.x && position.y !== snake.food.y) {\n      position.x = Math.floor(Math.random() * 30);\n      position.y = Math.floor(Math.random() * 30);\n    }\n\n    snake.livefood = position;\n    snake.foodeaten = false;\n    this.setState({\n      snake: snake\n    });\n    this.drawRect(position.x, position.y, 1, 1);\n  } // if the position is on the snake's body, return true, otherwise false.\n\n\n  exists(position) {\n    const snake = this.state.snake;\n\n    for (var i = 0; i < snake.currentscore; i++) {\n      var cord = {\n        x: snake.body[i].x,\n        y: snake.body[i].y\n      };\n\n      if (position.x === cord.x && position.y === cord.y) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  addBody() {\n    const snake = this.state.snake;\n    var newTail = {};\n\n    switch (snake.direction) {\n      case 'up':\n        newTail = {\n          x: snake.tail.x,\n          y: snake.tail.y - 1\n        };\n        break;\n\n      case 'down':\n        newTail = {\n          x: snake.tail.x,\n          y: snake.tail.y + 1\n        };\n        break;\n\n      case 'left':\n        newTail = {\n          x: snake.tail.x - 1,\n          y: snake.tail.y\n        };\n        break;\n\n      case 'right':\n        newTail = {\n          x: snake.tail.x + 1,\n          y: snake.tail.y\n        };\n        break;\n\n      default:\n        break;\n    }\n\n    snake.body.push(newTail);\n    snake.tail = newTail;\n  }\n\n  endGame() {\n    const ctx = this.state.ctx;\n    let newState = Object.assign({}, this.state);\n    newState.snake.running = false;\n    newState.snake.alive = false;\n    this.setState(newState); //Horizonal Lines\n\n    ctx.fillStyle = 'white';\n    this.drawRect(5, 9, 4, 1);\n    this.drawRect(5, 13, 4, 1);\n    this.drawRect(11, 9, 2, 1);\n    this.drawRect(11, 12, 2, 1);\n    this.drawRect(22, 9, 3, 1);\n    this.drawRect(22, 11, 3, 1);\n    this.drawRect(22, 13, 3, 1);\n    this.drawRect(6, 16, 2, 1);\n    this.drawRect(6, 20, 2, 1);\n    this.drawRect(16, 16, 4, 1);\n    this.drawRect(16, 18, 4, 1);\n    this.drawRect(16, 20, 4, 1);\n    this.drawRect(21, 16, 4, 1);\n    this.drawRect(21, 18, 4, 1);\n    this.drawRect(23, 20, 2, 1); //Vertical Lines\n\n    this.drawRect(5, 10, 1, 3);\n    this.drawRect(10, 10, 1, 4);\n    this.drawRect(13, 10, 1, 4);\n    this.drawRect(15, 9, 1, 5);\n    this.drawRect(19, 9, 1, 5);\n    this.drawRect(21, 9, 1, 5);\n    this.drawRect(5, 17, 1, 3);\n    this.drawRect(8, 17, 1, 3);\n    this.drawRect(10, 16, 1, 3);\n    this.drawRect(14, 16, 1, 3);\n    this.drawRect(16, 16, 1, 5);\n    this.drawRect(21, 16, 1, 5);\n    this.drawRect(24, 16, 1, 3); //Dots\n\n    this.drawRect(7, 11, 1, 1);\n    this.drawRect(8, 12, 1, 1);\n    this.drawRect(16, 10, 1, 1);\n    this.drawRect(17, 11, 1, 1);\n    this.drawRect(18, 10, 1, 1);\n    this.drawRect(11, 19, 1, 1);\n    this.drawRect(12, 20, 1, 1);\n    this.drawRect(13, 19, 1, 1);\n    this.drawRect(22, 19, 1, 1);\n  }\n\n  resetBoard() {\n    const temp = snake.score > snake.record ? snake.score : snake.record;\n    this.setState({\n      snake: {\n        head: {\n          x: 15,\n          y: 15\n        },\n        tail: {\n          x: 15,\n          y: 15\n        },\n        direction: '',\n        body: [{\n          x: 15,\n          y: 15\n        }],\n        running: false,\n        alive: true,\n        speed: 2,\n        food: {},\n        livefood: {},\n        livefoodeaten: true,\n        currentscore: 0,\n        lives: 1\n      }\n    });\n    this.drawBoard();\n  }\n\n  revive() {\n    let newState = Object.assign({}, this.state);\n    newState.livefoodeaten = true;\n    this.setState(newState);\n    newState.snake.body.splice(0, newState.snake.body.length);\n\n    for (var i = 0; i < newState.snake.currentscore; i++) {\n      var cord = {\n        x: 15,\n        y: 15\n      };\n      newState.snake.body.push(cord);\n    }\n\n    newState.snake.head.x = 15;\n    newState.snake.head.y = 15;\n    newState.snake.tail.x = 15;\n    newState.snake.tail.x = 15;\n    newState.alive = true;\n    newState.running = false;\n    this.setState(newState);\n    this.drawBoard();\n  }\n\n  speedUp() {\n    let newState = Object.assign({}, this.state);\n    newState.snake.speed = this.state.snake.speed + 0.3;\n    this.setState(newState);\n  }\n\n  speedDown() {\n    let newState = Object.assign({}, this.state);\n\n    if (this.state.snake.speed >= 1.3) {\n      newState.snake.speed = this.state.snake.speed - 0.3;\n    } else {\n      newState.snake.speed = this.state.snake.speed;\n      alert(\"This is the lowest speed!\");\n    }\n\n    this.setState(newState);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"gameContainer\",\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, this.state.display, React.createElement(\"canvas\", {\n      id: \"gameBoard\",\n      ref: \"gameBoard\",\n      width: boardSize,\n      height: boardSize,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }), React.createElement(KeyboardEventHandler, {\n      handleKeys: ['r', 'esc', '[', ']', 'space', 'z'],\n      onKeyEvent: (key, e) => {\n        if (key === 'r') {\n          this.resetBoard();\n        } else if (key === 'esc') {\n          this.endGame();\n        } else if (key === '[') {\n          this.speedDown();\n        } else if (key === ']') {\n          this.speedUp();\n        } else if (key === 'space') {\n          alert(\"Paused! Click the button below to continue :)\");\n        } else if (key === 'z') {\n          this.addlive();\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }), React.createElement(Snake, {\n      snake: this.state.snake,\n      changeDirection: this.changeDirection.bind(this),\n      endGame: this.endGame.bind(this),\n      drawFood: this.drawFood.bind(this),\n      revive: this.revive.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }), React.createElement(Panel, {\n      className: \"Panel\",\n      snake: this.state.snake,\n      speedUp: this.speedUp.bind(this),\n      speedDown: this.speedDown.bind(this),\n      resetBoard: this.resetBoard.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Board;","map":{"version":3,"sources":["/Users/JasonWu/snake/src/Board.js"],"names":["React","Snake","Panel","KeyboardEventHandler","boardSize","cellSize","Board","Component","constructor","props","state","snake","head","x","y","tail","direction","body","running","alive","speed","food","livefood","livefoodeaten","currentscore","record","lives","drawGrid","ctx","strokeStyle","fillStyle","fillRect","vertical","beginPath","moveTo","lineTo","stroke","horizontal","drawGrid2","drawSnake","forEach","cord","drawBoard","canvas","refs","gameBoard","setState","getContext","drawFood","changeDirection","newState","Object","assign","canvasMoveSnake","drawRect","addBody","addscore","addlive","endGame","l","h","componentDidMount","display","position","Math","floor","random","exists","drawliveFood","foodeaten","i","newTail","push","resetBoard","temp","score","revive","splice","length","speedUp","speedDown","alert","render","key","e","bind"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Snake from './snake';\nimport Panel from './Panel';\nimport './Panel.css';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\n//import { isAbsolute } from 'path';\nconst boardSize = 720;\nconst cellSize = boardSize / 30;\n\nclass Board extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      snake: {\n        head: {\n          x: 15,\n          y: 15\n        },\n        tail: {\n          x: 15,\n          y: 15\n        },\n        direction: '',\n        body: [{x:15,y:15}],\n        running: false,\n        alive: true,\n        speed: 2,\n        food: {},\n        livefood: {},\n        livefoodeaten: true,\n        currentscore: 0,\n        record: 0,\n        lives: 1\n      },\n    }\n  }\n\n    drawGrid() {\n        const {ctx} = this.state;\n        ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)';\n        ctx.fillStyle = '#9575cd';\n        ctx.fillRect(0, 0, boardSize, boardSize) // fillrect is a function, so has ()\n        for (var vertical = cellSize; vertical < boardSize; vertical += cellSize){\n          ctx.beginPath();\n          ctx.moveTo(vertical, 0);\n          ctx.lineTo(vertical, boardSize);\n          ctx.stroke();\n        }\n        for (var horizontal = cellSize; horizontal < boardSize; horizontal += cellSize){\n          ctx.beginPath();\n          ctx.moveTo(0, horizontal);\n          ctx.lineTo(boardSize ,horizontal);\n          ctx.stroke();\n        }\n    }\n\n    drawGrid2() {\n      const {ctx} = this.state;\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.01)'; // strokeStyle is a field, no ()\n      ctx.fillStyle = '#9575cd';\n      //ctx.fillRect(0, 0, boardSize, boardSize) // fillrect is a function, so has ()\n      for (var vertical = cellSize; vertical < boardSize; vertical += cellSize){\n        ctx.beginPath();\n        ctx.moveTo(vertical, 0);\n        ctx.lineTo(vertical, boardSize);\n        ctx.stroke();\n      }\n      for (var horizontal = cellSize; horizontal < boardSize; horizontal += cellSize){\n        ctx.beginPath();\n        ctx.moveTo(0, horizontal);\n        ctx.lineTo(boardSize, horizontal);\n        ctx.stroke();\n      }\n    }\n\n    drawSnake(){\n      const {ctx, snake} = this.state;\n      ctx.fillStyle = '#795548';\n      snake.body.forEach(cord => { // for loop through the snake's body, fill rect\n        ctx.fillRect(cord.x * cellSize, cord.y * cellSize, 1 * cellSize, 1 * cellSize);\n      })\n    }\n\n    drawBoard(){\n        const canvas = this.refs.gameBoard;\n        this.setState({\n          canvas: canvas,\n          ctx: canvas.getContext('2d')\n        }, function () {\n          this.drawGrid();\n          this.drawSnake();\n          this.drawFood();\n        })\n    }\n    \n    changeDirection (direction) {\n      let newState = Object.assign({}, this.state);\n      if (direction === 'up' || direction === 'w'){\n        newState.snake.direction = 'up';\n      } else if (direction === 'down' || direction === 's'){\n        newState.snake.direction = 'down';\n      } else if (direction === 'left' || direction === 'a'){\n        newState.snake.direction = 'left';\n      } else if (direction === 'right' || direction === 'd'){\n        newState.snake.direction = 'right';\n      }\n      this.setState(newState);\n      this.canvasMoveSnake();\n    }\n\n    canvasMoveSnake(){\n      const {ctx, snake} = this.state;\n      ctx.fillStyle = '#9575cd';\n      this.drawRect(snake.tail.x,snake.tail.y,1,1);\n      ctx.fillStyle = 'yellow';\n      this.drawRect(snake.head.x,snake.head.y,1,1);\n      if (snake.head.x === snake.food.x && snake.head.y === snake.food.y) {\n        this.addBody();\n        this.addscore();\n        this.drawFood();\n      }\n      if (snake.head.x === snake.livefood.x && snake.head.y === snake.livefood.y) {\n        this.addBody();\n        this.addlive();\n        snake.livefoodeaten = true;\n      }\n      if (snake.alive === false && snake.running === false){\n        this.endGame();\n      }\n      this.drawGrid2();\n    }\n\n    drawRect(x, y, l, h) {\n      const {ctx} = this.state;\n      ctx.fillRect(x * cellSize, y * cellSize, l * cellSize, h * cellSize);\n    }\n    \n    componentDidMount () {\n        this.drawBoard();\n    } //as soon as the object is created, draw the board\n\n    addscore() {\n      let newState = Object.assign({}, this.state);\n      newState.snake.currentscore = newState.snake.currentscore + 1;\n      newState.display = newState.snake.currentscore;\n      this.setState(newState);\n    }\n\n    addlive() {\n      let newState = Object.assign({}, this.state);\n      newState.snake.lives = newState.snake.lives + 1;\n      this.setState(newState);\n    }\n\n    drawFood () {\n      const {ctx, snake} = this.state;\n      var position = {\n        x: Math.floor(Math.random() * 30),\n        y: Math.floor(Math.random() * 30)\n      }\n      while(this.exists(position)){\n        position.x = Math.floor(Math.random() * 30);\n        position.y = Math.floor(Math.random() * 30);\n      }\n      snake.food = position;\n      if (snake.livefoodeaten === true && \n        (position.x % 7 === 0 && position.y % 7 === 0)){\n        ctx.fillStyle = 'pink';\n        this.drawliveFood();\n      }\n      this.setState({\n        snake:snake\n      })\n      ctx.fillStyle = 'red';\n      this.drawRect(position.x, position.y,1,1);\n    }\n    \n    drawliveFood () {\n      const {ctx, snake} = this.state;\n      ctx.fillStyle = 'pink';\n      var position = {\n        x: Math.floor(Math.random() * 30),\n        y: Math.floor(Math.random() * 30)\n      }\n      while(this.exists(position) && (\n        position.x !== snake.food.x && position.y !== snake.food.y)){\n        position.x = Math.floor(Math.random() * 30);\n        position.y = Math.floor(Math.random() * 30);\n      }\n      snake.livefood = position;\n      snake.foodeaten = false;\n      this.setState({\n        snake:snake\n      })\n      this.drawRect(position.x, position.y,1,1);\n    }\n\n    // if the position is on the snake's body, return true, otherwise false.\n    exists(position) {\n      const {snake} = this.state;\n      for (var i = 0; i < snake.currentscore; i++){\n        var cord = {\n          x: snake.body[i].x,\n          y: snake.body[i].y\n        }\n        if (position.x === cord.x && position.y === cord.y){\n          return true;\n        }\n      }\n      return false;\n    }\n    \n    addBody() {\n      const {snake} = this.state;\n      var newTail = {}\n      switch(snake.direction){\n        case 'up':\n          newTail = {x: snake.tail.x, y: snake.tail.y - 1}\n          break;\n        case 'down':\n          newTail = {x: snake.tail.x, y: snake.tail.y + 1}\n          break;\n        case 'left':\n          newTail = {x: snake.tail.x - 1, y: snake.tail.y}\n          break;\n        case 'right':\n          newTail = {x: snake.tail.x + 1, y: snake.tail.y}\n          break;\n        default:\n          break;\n      }\n      snake.body.push(newTail)\n      snake.tail = newTail;\n    }\n\n    endGame() {\n      const {ctx} = this.state;\n      let newState = Object.assign({}, this.state);\n      newState.snake.running = false;\n      newState.snake.alive = false;\n      this.setState(newState);\n      //Horizonal Lines\n      ctx.fillStyle = 'white';\n      this.drawRect(5,9,4,1);\n      this.drawRect(5,13,4,1);\n      this.drawRect(11,9,2,1);\n      this.drawRect(11,12,2,1);\n      this.drawRect(22,9,3,1);\n      this.drawRect(22,11,3,1);\n      this.drawRect(22,13,3,1);\n      this.drawRect(6,16,2,1);\n      this.drawRect(6,20,2,1);\n      this.drawRect(16,16,4,1);\n      this.drawRect(16,18,4,1);\n      this.drawRect(16,20,4,1);\n      this.drawRect(21,16,4,1);\n      this.drawRect(21,18,4,1);\n      this.drawRect(23,20,2,1);\n      //Vertical Lines\n      this.drawRect(5,10,1,3);\n      this.drawRect(10,10,1,4);\n      this.drawRect(13,10,1,4);\n      this.drawRect(15,9,1,5);\n      this.drawRect(19,9,1,5);\n      this.drawRect(21,9,1,5);\n      this.drawRect(5,17,1,3);\n      this.drawRect(8,17,1,3);\n      this.drawRect(10,16,1,3);\n      this.drawRect(14,16,1,3);\n      this.drawRect(16,16,1,5);\n      this.drawRect(21,16,1,5);\n      this.drawRect(24,16,1,3);\n      //Dots\n      this.drawRect(7,11,1,1);\n      this.drawRect(8,12,1,1);\n      this.drawRect(16,10,1,1);\n      this.drawRect(17,11,1,1);\n      this.drawRect(18,10,1,1);\n      this.drawRect(11,19,1,1);\n      this.drawRect(12,20,1,1);\n      this.drawRect(13,19,1,1);\n      this.drawRect(22,19,1,1);\n    }\n\n    resetBoard(){\n      const temp = snake.score > snake.record? snake.score:snake.record;\n      this.setState(({\n          snake: {\n            head: {\n              x: 15,\n              y: 15\n            },\n            tail: {\n              x: 15,\n              y: 15\n            },\n            direction: '',\n            body: [{x:15,y:15}],\n            running: false,\n            alive: true,\n            speed: 2,\n            food: {},\n            livefood: {},\n            livefoodeaten: true,\n            currentscore: 0,\n            lives: 1\n          },\n      }))\n      this.drawBoard();\n    }\n\n    revive(){\n      let newState = Object.assign({}, this.state);\n      newState.livefoodeaten = true;\n      this.setState(newState);\n      newState.snake.body.splice(0, newState.snake.body.length);\n      for (var i = 0; i < newState.snake.currentscore; i++){\n        var cord = {\n          x: 15,\n          y: 15\n        }\n        newState.snake.body.push(cord);\n      }\n      newState.snake.head.x = 15;\n      newState.snake.head.y = 15;\n      newState.snake.tail.x = 15;\n      newState.snake.tail.x = 15;\n      newState.alive = true;\n      newState.running = false;\n      this.setState(newState);\n      this.drawBoard();\n    }\n\n    speedUp(){\n      let newState = Object.assign({}, this.state);\n      newState.snake.speed = this.state.snake.speed + 0.3;        \n      this.setState(newState);\n    }\n\n    speedDown(){\n      let newState = Object.assign({}, this.state);\n      if (this.state.snake.speed >= 1.3) {\n        newState.snake.speed = this.state.snake.speed - 0.3;\n      } else {\n        newState.snake.speed = this.state.snake.speed;\n        alert(\"This is the lowest speed!\")\n      }\n      this.setState(newState);\n    }\n\n    render() {\n        return (\n            <div id='gameContainer' className='container-fluid'>\n              {this.state.display}\n                <canvas id='gameBoard' ref=\"gameBoard\" width={boardSize} height={boardSize} />\n                  <KeyboardEventHandler\n                    handleKeys={['r', 'esc', '[', ']', 'space', 'z']}\n                    onKeyEvent={(key, e) => {\n                      if(key === 'r'){\n                        this.resetBoard();\n                      } else if (key === 'esc'){\n                        this.endGame();\n                      } else if (key === '['){\n                        this.speedDown();\n                      } else if (key === ']'){\n                        this.speedUp();\n                      } else if (key === 'space') {\n                        alert(\"Paused! Click the button below to continue :)\");\n                      } else if (key === 'z'){\n                        this.addlive();\n                      }\n                    }}/>\n                    <Snake snake={this.state.snake}\n                    changeDirection={this.changeDirection.bind(this)}\n                    endGame={this.endGame.bind(this)}\n                    drawFood={this.drawFood.bind(this)}\n                    revive={this.revive.bind(this)}\n                  />\n                  <Panel  className = 'Panel'\n                  snake={this.state.snake}\n                  speedUp={this.speedUp.bind(this)}\n                  speedDown={this.speedDown.bind(this)}\n                  resetBoard={this.resetBoard.bind(this)}\n                  />\n            </div>\n        )\n    }\n}\n\nexport default Board;"]},"metadata":{},"sourceType":"module"}